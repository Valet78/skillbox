# Задание 21.5.4. Пошаговая ролевая игра (дополнительная задача)

`Что нужно сделать`
> Реализуйте упрощённую версию пошаговой ролевой игры.

* Действие разворачивается на карте размером 20 на 20 клеток. По клеткам перемещаются <br>
  игрок и его противники.
* После каждого хода игрока карта показывается вновь со всеми противниками на ней:
    - игрок помечается буквой P;
    - противники — буквой E;
    - пустые места — точкой.
* Каждый персонаж игры представлен в виде структуры с полями:
    - «Имя»;
    - «Жизни»;
    - «Броня»;
    - «Урон».
* Сначала создаётся пять противников в случайных клетках карты:
    - Имена противникам задаются в формате Enemy #N, где N — порядковый номер.
    - Уровень жизни противников задаётся случайно — от 50 до 150.
    - Уровень брони варьируется от 0 до 50.
    - Урон тоже выбирается случайно — от 15 до 30.
* Игрок конструирует своего персонажа самостоятельно. Задаёт все его параметры, включая имя.
  Все персонажи появляются в случайных местах карты.
* Игрок ходит с помощью команд: L, R, U, D (по первым буквам слов left, right, up, down). <br>
  В зависимости от команды выбирается направление перемещения: влево, вправо, вверх, вниз.
* Противники перемещаются в случайном направлении.
* Если игрок перемещается в сторону, где уже кто-то находится, он наносит этому персонажу урон. <br>
  Противники при этом никогда не бьют друг друга: они просто пропускают ход и остаются на своём месте. <br>
  За пределы карты (20 на 20 клеток) ходить нельзя никому. Если кто-то выбрал направление за границами, <br>
  ход пропускается.
* Формула расчёта урона совпадает с той, что была в материале. Жизни уменьшаются на размер урона. <br>
  При этом броня тоже сокращается на приведённый урон.
* Игра заканчивается, когда умирают либо все противники, либо игрок. В первом случае на экран выводится <br>
  сообщение о победе, во втором — о поражении.
* Если в начале хода игрок вводит команду save или load вместо направления перемещения, то игра либо сохраняет <br>
  своё состояние в файл, либо загружает это состояние из файла.

`Советы и рекомендации`

* Для определения команды персонажа можно внутри структуры данных о нём завести флаг.
* Для отображения координат персонажей можно использовать структуру вектора из другой задачи, но заменить типы
  координат.
* Для сохранения параметров игры и их загрузки можно работать с текстовыми данными. Однако записать всё в двоичном <br>
  формате проще, главное — соблюдать последовательность полей:

```c++
std::ofstream file("save.bin", std::ios::binary);
for (int i = 0; i < 6; ++i) {
        file.write((char*)&(characters[i].position),
                   sizeof(characters[i].position));
        …
}
```

* При загрузке используйте `ifstream` и ту же последовательность полей.
* Задание необязательно сдавать на проверку. Но если хотите это сделать, куратор будет учитывать следующее:
    - Корректно работает сохранение и загрузка в игре.
    - После загрузки все атрибуты игрока, включая имя, восстанавливаются из файла.
    - После загрузки количество противников на поле соответствует количеству противников при сохранении.
    - Все игроки после загрузки появляются в местах, где они находились при сохранении.
    - При ходе игрока не появляются новые противники.
    - Перед загрузкой файла сохранения проверяется, есть ли он в операционной системе.
